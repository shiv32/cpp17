Example: Factory + Strategy in C++