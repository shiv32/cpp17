State machine design pattern + other desing patterns demo